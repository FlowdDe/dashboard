{namespace d=TYPO3\CMS\Dashboard\ViewHelpers}
<f:layout name="Dashboard" />
<f:section name="MainContent">

<f:flashMessages />

	<script type="text/javascript">
		require(['{dynamicRequireJsModules.app}', '{dynamicRequireJsModules.viewModel}'], function (dashboardApp, viewModel) {
			var DASHBOARD_APP = dashboardApp.getInstance(
				<f:format.htmlentitiesDecode>{dashboardAppInitialData}</f:format.htmlentitiesDecode>,
				viewModel
			).run();
		});
	</script>

<f:comment></f:comment>


<f:if condition="{dashboard}">
	<f:then>
		<f:if condition="{dashboard.dashboardWidgetSettings}">
			<f:then>
				<div data-identifier="grid-stack" class="grid-stack" data-gs-width="12" data-gs-animate="yes">
					<f:for each="{dashboard.dashboardWidgetSettings}" as="dashboardWidgetSetting" iteration="dashboardWidgetIteration">
						<div class="grid-stack-item"
							data-gs-x="{dashboardWidgetSetting.x}"
							data-gs-y="{dashboardWidgetSetting.y}"
							data-gs-width="{dashboardWidgetSetting.width}"
							data-gs-height="{dashboardWidgetSetting.height}"
							data-gs-id="{dashboardWidgetSetting.uid}"
							style="display: none;">
							<div class="grid-stack-item-header clearfix">
								<div class="pull-left">
									<f:image src="{d:be.dashboardWidget.IconSrc(widgetIdentifier: dashboardWidgetSetting.widgetIdentifier)}" width="20" height="20"></f:image>
									<span>{dashboardWidgetSetting.title}</span>
								</div>
								<div class="pull-right">
									<a href="#" onclick="{d:be.dashboardWidget.EditOnClick(dashboardWidgetSetting: dashboardWidgetSetting)}" title="Edit"><span class="t3-icon fa t3-icon fa fa-pencil icon-size-small"> </span></a>
								</div>
							</div>
							<div class="grid-stack-item-content"></div>
							<div class="grid-stack-item-footer clearfix"></div>
						</div>
					</f:for>
				</div>
			</f:then>
			<f:else>
				<f:be.infobox title="Message title">
					There are no dashboards widgets created, <a href="#" data-identifier="newDashboardWidgetSetting">click here to create your first dashboard</a>
				</f:be.infobox>
			</f:else>
		</f:if>
	</f:then>
	<f:else>	
		<f:be.infobox title="Message title">
			There are no dashboards created, <a href="#" data-identifier="newDashboard">click here to create your first dashboard</a>
		</f:be.infobox>
	</f:else>
</f:if>

<f:comment>
<div data-toggle="tooltip">Tooltip</div>
</f:comment>

</f:section>